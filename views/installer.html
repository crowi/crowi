{% extends 'layout/single-nologin.html' %}

{% block html_title %}{{ t('page_installer.title.welcome') }} {% endblock %}

{% block content_main %}

<div class="v2-single-page-container">

  <div class="installer-header">
    <img src="/logo/500w-inverse.png" width="250" alt="Crowi">
    <h1>
      {{ t('page_installer.title.welcome') }}
    </h1>
  </div>


  <div class="login-dialog"  id="login-dialog">
    <div class="login-dialog-inner">
      <h2>{{ t('page_installer.title.create_admin_account') }}</h2>


      <p class="text-info">
        {{ t('page_installer.note.first_create_admin') }}
      </p>

      {% if req.form.errors.length > 0 %}
      <div class="alert alert-danger">
        <ul>
          {% for error in req.form.errors %}
          <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <form role="form" action="/installer/createAdmin" method="post">
        <label>{{ t('User ID') }}</label>
        <div class="input-group" id="input-group-username">
          <span class="input-group-prepend"><span class="input-group-text"><strong>@</strong></span></span>
          <input type="text" class="form-control" placeholder="{{ t('page_register.example') }}: taroyama" name="registerForm[username]" value="{{ req.body.registerForm.username }}" required>
        </div>
        <p class="help-block">
        <span id="help-block-username" class="text-danger"></span>
        {{ t('page_register.form_help.user_id') }}
        </p>

        <label>{{ t('Name') }}</label>
        <div class="input-group">
          <span class="input-group-prepend"><span class="input-group-text">{{ Icon("account") }}</span></span>
          <input type="text" class="form-control" placeholder="{{ t('page_register.example') }}: {{ t('page_register.taro_yamada') }}" name="registerForm[name]" value="{{ req.body.registerForm.name }}" required>
        </div>

        <label>{{ t('Email') }}</label>
        <div class="input-group">
          <span class="input-group-prepend"><span class="input-group-text">{{ Icon("email") }}</span></span>
          <input type="email" class="form-control" placeholder="E-mail" name="registerForm[email]" value="{{ googleEmail|default(req.body.registerForm.email) }}" required>
        </div>

        <label>{{ t('Password') }}</label>
        <div class="input-group">
          <span class="input-group-prepend"><span class="input-group-text">{{ Icon("key") }}</span></span>
          <input type="password" class="form-control" placeholder="Password" name="registerForm[password]" required>
        </div>
        <p class="help-block">
        {{ t('page_register.form_help.password') }}
        </p>

        <input type="hidden" name="_csrf" value="{{ csrf() }}">
        <input type="submit" class="btn btn-primary btn-lg btn-block" value="{{ t('page_installer.button.submit') }}">
      </form>

    </div>
  </div>

</div>

<script src="{{ assets('/js/installer.js') }}"></script>

{% endblock %}

